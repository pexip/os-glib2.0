From 3529bb4450a519959a5d9cb787404296322618a1 Mon Sep 17 00:00:00 2001
From: Philip Withnall <withnall@endlessm.com>
Date: Fri, 7 Feb 2020 17:10:23 +0000
Subject: [PATCH] libcharset: Drop a redundant environment variable

It was used for running tests when we built with autotools, but is no
longer used in the Meson build system. If we need something similar in
future, it should be done by adding internal API to override the
directory on a per-call basis, rather than loading a path from a shared
global table every time.

Signed-off-by: Philip Withnall <withnall@endlessm.com>

Helps: #1919
---
 glib/libcharset/localcharset.c | 6 +-----
 1 file changed, 1 insertion(+), 5 deletions(-)

diff --git a/glib/libcharset/localcharset.c b/glib/libcharset/localcharset.c
index 0c4d544be1..ab3a2678d3 100644
--- a/glib/libcharset/localcharset.c
+++ b/glib/libcharset/localcharset.c
@@ -117,11 +117,7 @@ _g_locale_get_charset_aliases (void)
       const char *base = "charset.alias";
       char *file_name;
 
-      /* Make it possible to override the charset.alias location.  This is
-	 necessary for running the testsuite before "make install".  */
-      dir = getenv ("CHARSETALIASDIR");
-      if (dir == NULL || dir[0] == '\0')
-	dir = relocate (GLIB_CHARSETALIAS_DIR);
+      dir = relocate (GLIB_CHARSETALIAS_DIR);
 
       /* Concatenate dir and base into freshly allocated file_name.  */
       {
-- 
GitLab

